---
layout:         post
title:          "Google Cloud Pltformç”³è¯·ä¸SSRæ­å»º"
subtitle:       "GCPæ³¨å†Œå¹¶ç”³è¯·VPSå®‰è£…SSRåŒæ—¶å¼€å¯BBRåŠ é€Ÿ"
date:           2017-11-26 16:30
author:         "Quanyin Tang"
author_homepage: https://quanyin.eu.org
header-img:     "/Source/images/background/post-bg-gcp.png"
description:    "å¢™å¤–çš„ä¸–ç•Œå¾ˆç²¾å½©,å¢™å†…çš„ä¸–ç•Œå¾ˆæ— èŠã€‚SSR,ç®€å•å¿«é€Ÿåœ°FQ"
catalog:        true
lazyload:       true
mathjax:        false
categories:     
                - GFW
tags:
                - SSR
                - GFW
---
<!--
<a href="/Source/images/post-content/post-content/post-example.png"><img data-src="/Source/images/post-content/post-example.png" class="lazyload" alt=" " /></a>
-->
## ä¸€ã€ç”³è¯·GCP
> é¦–å…ˆ,ä½ å¾—æœ‰ä¸ªGmailè´¦å·;ä»¥ä¸‹æ­¥éª¤å¯èƒ½éœ€è¦ FQ

è¿›å…¥ [https://cloud.google.com/free/](https://cloud.google.com/free/),å•å‡»`Try it Free`-`æ¥æ”¶æ¡æ¬¾`-`åŒæ„å¹¶ç»§ç»­`,
å¿…é¡»è¦æœ‰ä¸€å¼ ä¿¡ç”¨å¡,å¹¶å¡«å…¥ç›¸å…³ä¿¡æ¯ã€‚
<a href="/Source/images/post-content/post-content/gcp-ssr/post-gcp-ssr-gcp-try.jpg"><img data-src="/Source/images/post-content/gcp-ssr/post-gcp-ssr-gcp-try.jpg" class="lazyload" alt=" " /></a>
<a href="/Source/images/post-content/post-content/gcp-ssr/post-gcp-ssr-gcp-agree.jpg"><img data-src="/Source/images/post-content/gcp-ssr/post-gcp-ssr-gcp-agree.jpg" class="lazyload" alt=" " /></a>
<a href="/Source/images/post-content/post-content/gcp-ssr/post-gcp-ssr-gcp-account.gif"><img data-src="/Source/images/post-content/gcp-ssr/post-gcp-ssr-gcp-account.gif" class="lazyload" alt=" " /></a>
è·³è½¬åï¼Œå¦‚æœä½ èƒ½çœ‹åˆ°é¡µé¢é¡¶éƒ¨æœ‰ä¸€ä¸ª"ç¤¼ç‰© ğŸ " çš„å°å›¾æ ‡ï¼Œæˆ–è€…è¯´ä½ æ”¶åˆ°äº†ç›¸åº”çš„é‚®ä»¶ï¼Œè¯´æ˜è¯•ç”¨é‡‘å·²åˆ°è´¦ã€‚
> å¦‚æœä½ è¿ç½‘é¡µéƒ½æ‰“ä¸å¼€,è¯·å…ˆæƒ³åŠæ³• FQ.å¯ä»¥è¯•è¯•chromeçš„æ’ä»¶[Tunnello-VPN](https://chrome.google.com/webstore/detail/tunnello-vpn-unblock-ultr/hoapmlpnmpaehilehggglehfdlnoegck)

## äºŒã€åˆ›å»ºå®ä¾‹
1. åœ¨å·¦ä¾§èœå•ä¸­é€‰æ‹©[è®¡ç®—å®ä¾‹(Compute Engine)-VMå®ä¾‹](https://console.cloud.google.com/compute/instances),å¯èƒ½éœ€è¦å…ˆåˆ›å»ºé¡¹ç›®(Project)
2. é€šè¿‡`åˆ›å»ºå®ä¾‹`æˆ–è€…`å•å‡»åŠ å·`æ¥åˆ›å»ºä¸€ä¸ªè™šæ‹Ÿæœºã€‚
    - åç§°ï¼šéšæ„è¾“å…¥
    - åœ°åŒºï¼šå»ºè®®asia-east1(åœ¨å°æ¹¾)
    - æœºå™¨ç±»å‹ï¼šå°å‹ï¼ˆå»ºè®®ï¼‰/å¾®å‹
    - å¯åŠ¨ç£ç›˜å•å‡»æ›´æ”¹ â€“ CentOS 7 æˆ–è€… Debian 9 æˆ–è€… Ubuntu 16.04
    - é˜²ç«å¢™ï¼šå…è®¸HTTPæµé‡ï¼Œå…è®¸HTTPSæµé‡   
<a href="/Source/images/post-content/post-content/gcp-ssr/post-gcp-ssr-gcp-instance.jpg"><img data-src="/Source/images/post-content/gcp-ssr/post-gcp-ssr-gcp-instance.jpg" class="lazyload" alt=" " /></a>

3. é…ç½®ç½‘ç»œè®¿é—®
    - å·¦ä¾§å¯¼èˆªé€‰æ‹©`VPCç½‘ç»œ`
    - `å¤–éƒ¨IPåœ°å€` â€“ `é€‰æ‹©ä¸€ä¸ªip` â€“ ç±»å‹è°ƒæ•´ä¸º`é™æ€`
    - `é˜²ç«å¢™è§„åˆ™` â€“ `åˆ›å»ºé˜²ç«å¢™è§„åˆ™`ï¼šæµé‡æ–¹å‘`å…¥ç«™`ã€æ¥æºipåœ°å€`0.0.0.0/0`ã€åè®®å’Œç«¯å£`å…¨éƒ¨å…è®¸`
    - `é˜²ç«å¢™è§„åˆ™` â€“ `åˆ›å»ºé˜²ç«å¢™è§„åˆ™`ï¼šæµé‡æ–¹å‘`å‡ºç«™`ã€æ¥æºipåœ°å€`0.0.0.0/0`ã€åè®®å’Œç«¯å£`å…¨éƒ¨å…è®¸`

## ä¸‰ã€å¼€å¯BBRåŠ é€Ÿ
1. è¿›å…¥`å®ä¾‹æ§åˆ¶å°` â€“ `SSH` â€“ `åœ¨æµè§ˆå™¨çª—å£ä¸­æ‰“å¼€`
<a href="/Source/images/post-content/post-content/gcp-ssr/post-gcp-ssr-gcp-ssh-instance.jpg"><img data-src="/Source/images/post-content/gcp-ssr/post-gcp-ssr-gcp-ssh-instance.jpg" class="lazyload" alt=" " /></a>
2. å®‰è£…BBR:ä¾æ¬¡æ‰§è¡Œ
```bash
wget --no-check-certificate https://github.com/teddysun/across/raw/master/bbr.sh
chmod +x bbr.sh
sudo ./bbr.sh
```
æˆ–è€…æç¤ºå·²ç»å¼€å¯bbr.æˆ–è€…å®‰è£…å®Œæˆåï¼Œè„šæœ¬ä¼šæç¤ºéœ€è¦é‡å¯ VPSï¼Œè¾“å…¥ y å¹¶å›è½¦åé‡å¯ã€‚

3. æ£€æŸ¥
é‡å¯å®Œæˆåï¼Œè¿›å…¥ VPSï¼ŒéªŒè¯ä¸€ä¸‹æ˜¯å¦æˆåŠŸå®‰è£…æœ€æ–°å†…æ ¸å¹¶å¼€å¯`TCP-BBR`
    - æŸ¥çœ‹å†…æ ¸ç‰ˆæœ¬ï¼š
```bash
uname -r                                            #æŸ¥çœ‹å†…æ ¸ç‰ˆæœ¬,4.9åŠä»¥ä¸Šå°±OKäº†ã€‚
```

    - æŸ¥çœ‹BBRçŠ¶æ€ï¼š
```bash
sudo su
sysctl net.ipv4.tcp_available_congestion_control    #è¿”å›å€¼å«æœ‰bbr
sysctl net.ipv4.tcp_congestion_control              #è¿”å›å€¼å«æœ‰bbr
sysctl net.core.default_qdisc                       #è¿”å›å€¼å«æœ‰fq
lsmod | grep bbr                                    #è¿”å›å€¼å«æœ‰bbr
```

## å››ã€ä¸€é”®å®‰è£…SSR
1. è·å–ä¸€é”®å®‰è£…è„šæœ¬
```bash
wget -N --no-check-certificate https://raw.githubusercontent.com/91yun/shadowsocks_install/master/shadowsocksR.sh 
```
2. å®‰è£…å¹¶é…ç½®
```bash
chmod +x ShadowsocksR.sh
sudo ./ShadowsocksR.sh
```
å®‰è£…è„šæœ¬ä¸€æ­¥ä¸€æ­¥æ¥å³å¯
```
é»˜è®¤åŠ å¯†ä¸ºï¼š chacha20
é»˜è®¤åè®®ä¸ºï¼š auth_sha1_v4
é»˜è®¤æ··æ·†ä¸ºï¼š tls1.2_ticket_auth
```

3. ä¹Ÿå¯ä»¥é€‰æ‹©teddysunæä¾›çš„è„šæœ¬
```bash
wget --no-check-certificate https://raw.githubusercontent.com/teddysun/shadowsocks_install/master/shadowsocksR.sh
chmod +x shadowsocksR.sh
sudo ./shadowsocksR.sh 2>&1 | tee shadowsocksR.log
```

## å‚è€ƒ
1. [ä¸€é”®å®‰è£…æœ€æ–°å†…æ ¸å¹¶å¼€å¯ BBR è„šæœ¬](https://teddysun.com/489.html)
2. [ShadowsocksRä¸€é”®å®‰è£…è„šæœ¬](https://shadowsocks.be/9.html)
3. [shadowsocks_install](https://github.com/iMeiji/shadowsocks_install)
4. [91yun](https://github.com/91yun/shadowsocks_install)
